<div class="modal_wrapper" >
  <span class="close_button icon-cancel" (click)="activeModal.dismiss()"></span>
  <div class="slider_container" *ngIf="post.media.length">
      <app-slider [contentArray]="post.media"></app-slider>

  </div>
  <div class="post_content">
      <div class="scrollable_part" [perfect-scrollbar]="config" appScroolEnd>
          <div class="post_info">
                 <span class="user_info">
                    <span class="avatar" [ngStyle]="{'background-image':'url(' + post.owner.thumbnail + ')' }"></span>
                    <span class="name">{{post.owner.user_name}}</span>
                </span>
              <span class="date">{{post.created_at * 1000 | date: 'dd MMM y'}}</span>
          </div>
          <div class="post_body" >
              <p class="post_text">{{post.text}}</p>


          </div>
          <div class="post_footer">
              <div class="icons_wrapper">
                  <span class="icon-heart-o" [ngClass]="{'icon-heart': post.liked_by_user}" (click)="likeAndUnlikePost(post.post_id, post.liked_by_user)">{{post.likes_count}}</span>
                  <span class="icon-bubble">{{post.comments_count}}</span>
              </div>

              <select  class="sort_select" [(ngModel)]="comments_sort_type" (change)="changeSorting()">
                  <option value="date_newer">New to old</option>
                  <option value="date_older">Old to new</option>
                  <option value="top">Most liked</option>
              </select>

          </div>


          <div class="comments" *ngFor="let comment of comments; let i = index">
              <div class="post_info">
                  <span class="user_info">
                    <span class="avatar" [ngStyle]="{'background-image':'url(' + comment.owner.thumbnail + ')' }" ></span>
                    <span class="name">{{comment.owner.user_name}}</span>
                </span>
                  <span class="date">{{ comment.created_at * 1000 | timeAgo }}</span>
              </div>
              <div class="comment_body">
                  <p class="comment_text">{{comment.text}}</p>
                  <a [href]="comment.media.multimedia" target="_blank" class="picture" *ngIf="comment.has_media_flag" [ngStyle]="{'background-image':'url(' + comment.media.thumbnail + ')' }"></a>
              </div>
              <div class="comment_footer">
                  <div class="icons_wrapper">
                      <span class="icon-heart-o" [ngClass]="{'icon-heart': comment.liked_by_user}" (click)="likeAndUnlikeComment(comment)">{{comment.likes_count}}</span>
                  </div>
                  <div class="drop_down_container">
                      <div class="dots_wrapp">
                          <i class="dots"></i>
                          <i class="dots"></i>
                          <i class="dots"></i>
                      </div>
                      <ul class="drop_down_menu" (mouseleave)="onMouseLeave( comment)">
                          <li class="drop_down_item drop_down_title">
                              Comment menu
                          </li>
                          <!--done ?-->
                          <li class="drop_down_item"
                              (click)="commentOwnerInterraction('mute', comment.owner.user_id)"
                              *ngIf="currentUserData.user_data.user_id !== comment.owner.user_id">
                              <span class="drop_down_fill icon-mute">Mute User</span>
                          </li>
                          <!--done ?-->
                          <li class="drop_down_item"
                              (click)="commentOwnerInterraction('block', comment.owner.user_id)"
                              *ngIf="currentUserData.user_data.user_id !== comment.owner.user_id">

                              <span class="drop_down_fill icon-eye-blocked">Block User</span>
                          </li>


                          <!--done ?-->
                          <li class="drop_down_item comm_block_with_select"
                              *ngIf="currentUserData.user_data.user_id !== comment.owner.user_id && is_admin">
                              <span class="drop_down_fill icon-ban" (click)="commentInterraction('ban', comment)">Ban User</span>


                              <select name="ban_days" class="ban-days" [(ngModel)]="banDays"
                                      *ngIf="comment.bunned"
                                      (change)="commentInterraction('do_ban', comment, i, banDays)">
                                  <option value="0" selected disabled>Days for ban</option>
                                  <option value="3">3 days</option>
                                  <option value="7">7 days</option>
                                  <option value="14">14 days</option>
                                  <option value="30">30 days</option>
                                  <option value="60">60 days</option>
                                  <option value="3000">3000 days</option>
                              </select>
                          </li>

                          <!--done-->
                          <li class="drop_down_item" (click)="commentInterraction('remove', comment, i)"
                              *ngIf="currentUserData.user_data.user_id === comment.owner.user_id || is_admin">

                              <span class="drop_down_fill icon-cancel">{{currentUserData.user_data.user_id === comment.owner.user_id ? 'Delete Comment' : 'Remove Comment'}}</span>
                          </li>
                          <!--done-->
                          <li class="drop_down_item" (click)="commentInterraction('inappropriate', comment)"
                              *ngIf="currentUserData.user_data.user_id !== comment.owner.user_id && !is_admin">

                              <span class="drop_down_fill icon-flag">Flag inappropriate </span>
                          </li>
                      </ul>
                  </div>


              </div>
          </div>
          <span class="loading" *ngIf="show_loading">Loading, please wait ...</span>


      </div>




      <form class="new_comment_wrapp" #commentForm="ngForm" (submit)="createNewComment(commentForm)" *ngIf="post.allow_comment_flag && walls.member">
          <input type="text" class="text_field" name="text" [(ngModel)]="textField" placeholder="Enter your comment...">
          <input type="file" id="comment_file" name="files" (change)="fileDropped($event)" hidden>
          <div class="add_button_wrapp" [ngClass]="{'with_spinner': inProcess}">
              <label for="comment_file" class="add_button icon-clip"></label>
          </div>
          <button type="submit" class="send_button icon-plane"></button>
      </form>
      <p class="comments_not_allowed" *ngIf="!post.allow_comment_flag || !walls.member">{{!post.allow_comment_flag ? 'Comments are disabled' : 'Only members can to comment'}}</p>



  </div>


</div>
