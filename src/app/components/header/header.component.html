<header class="header">
  <div class="main_container">
    <div class="logo" >
      <span class="header_link icon-home" [routerLink]="'/all-rooms'" [ngClass]="{'active': showSuggestOrDefault === 'default'}" (click)="showSuggestionsRoomsorDefault('default')">My Tifos</span>
      <span class="header_link icon-thumbs" [routerLink]="'/all-rooms'" [ngClass]="{'active': showSuggestOrDefault === 'suggested'}" (click)="showSuggestionsRoomsorDefault('suggested')">Discover</span>
    </div>
    <div class="search"  >
      <input type="text" class="search_field" placeholder="Search" [(ngModel)]="room_search" >
      <span class="icon-search" (click)="doRoomSearch(room_search)"></span>
    </div>


    <div class="icons_wrapper">
      <div class="drop_down_container new_messages">
        <span class="icon-mail" [ngClass]="{'new_events': messages_quantity}" [routerLink]="'/user-dialogs'"></span>

          <ul class="drop_down_menu" >
            <li class="drop_down_item drop_down_title messages_title">
              Messages <span class="messages_quantity" *ngIf=" messages_quantity">{{1  + ' - ' + messages.length + ' of ' + messages_quantity}}</span>
            </li>
            <li class="drop_down_item user_bar" *ngFor="let message of messages" (click)="goToDialogPage(message)">

                <span class="avatar" [ngStyle]="{'background-image':'url(' + message.user.thumbnail + ')' }"></span>

                <div class="user_name_and_date" >
                <span class="top_wrapp">
                    <span class="name">{{message.user.user_name}}</span>
                    <span class="date">{{message.updated_at * 1000 | timeAgo }}</span>
                </span>
                  <p class="text">{{message.text || 'Media message...'}}</p>
                </div>

            </li>
            <li class="see_all_messages" *ngIf="!messages_quantity" >No new messages</li>
            <li class="see_all_messages" *ngIf="messages_quantity > 5" [routerLink]="'/user-dialogs'">See all messages</li>

          </ul>

      </div>



      <div class="drop_down_container new_notifications">
        <span class="icon-bell-o" [ngClass]="{'new_events': notifications_quantity}" [routerLink]="'/user-notifications'"></span>

        <ul class="drop_down_menu" >
          <li class="drop_down_item drop_down_title messages_title">
            Notifications <span class="messages_quantity" *ngIf=" notifications_quantity">{{1  + ' - ' + notifications.length + ' of ' + notifications_quantity}}</span>
          </li>

          <li class="drop_down_item user_bar" *ngFor="let notification of notifications" (click)="goToNotificationsPage(notification)">

            <span class="name" [ngClass]="{'icon-comments': notification.type === 'CommentNotification', 'icon-bubble': notification.type === 'PostInRoomNotification', 'icon-mail': notification.type === 'MessageNotification'}">{{notification.user.user_name}}</span>

            <span class="date">{{notification.created_at |  date: 'dd MMM y'}}</span>
            <p class="text">{{notification.data.details.alert}}</p>

          </li>
          <li class="see_all_messages" *ngIf="!notifications_quantity" >No new notifications</li>
          <li class="see_all_messages" *ngIf="notifications_quantity > 5" [routerLink]="'/user-notifications'">See all messages</li>

        </ul>

      </div>



      <div class="user_info drop_down_container" >
                <span class="avatar" [ngStyle]="{'background-image': 'url(' + currentUser.user_data.thumbnail + ')'}"></span>
                <span class="name">{{currentUser.user_data.user_name}}</span>
        <ul class="drop_down_menu">
          <li class="drop_down_profile_item" [routerLink]="['/about-user', currentUser.user_data.user_id]" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}">Profile</li>
          <li class="drop_down_profile_item" [routerLink]="'/user-settings'" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}">Profile Settings & Privacy</li>
          <li class="drop_down_profile_item" (click)="logOut()">Logout</li>
        </ul>
      </div>
    </div>
  </div>
</header>
